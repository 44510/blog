## webpack 基础项目搭建

接下来就从头来搭建一个 webpack5 的开发环境。

### webpack 配置相关核心概念

1. entry
2. output
3. module
   1. loader
4. plugins
5. resolve
6. mode，
7. devServer，开发服务器；
   1. 开发服务器，文件有修改，热更新；
8. devtool

webpack 至少需要两套配置，一个用来开发，一个用来打包成线上运行的代码；

### 实际操作

```bash
# 1.添加基本的项目构建
$: cd target-folder
$: mkdir webpack5-modify-assets
$: cd webpack5-modify-assets/
$: git init
$: yarn init -y
$: mkdir src scripts public
$: echo node_modules > .gitignore
$: echo dist >> .gitignore
$: touch public/index.html
$: touch scripts/webpack.config.base.js
$: touch src/index.js
```

#### 基础运行

1. 然后在入口`public/index.html`和`src/index.js`添加基础的内容；
2. 在`scripts/webpack.config.base.js`进行基础的配置；
3. 添加`babel.config.js`文件；
4. 添加`package.scripts`执行命令；
5. 添加必要的依赖包，包括webpack相关、babel相关、loader；

<!-- !从头演示一下 -->

要开发测试，首先我们要搭建一个基本的 webpack 脚手架，如[webpack-5](https://github.com/qiuwww/blog/blob/de3c71c21792519c7a11e0b59680e75edea38815/9.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack/webpack-5)示例，主要包括如下的一些部分；

1. 新建一个项目，添加`package.json`和`.gitignore`等文件；
2. 添加多环境的 webpack 配置文件；
   1. webpack.base.js；
   2. webpack.dev.js；
   3. webpack.prod.js；
3. 添加`package.js`的`scripts`命令；
   1. dev；
   2. build；
   3. analyzer；
4. 添加入口文件 entry，以及相关的 loader；
   1. 添加 webpack-html 插件，将 js 文件注入到一个 html 模板中；
   2. 添加 loader，添加 babelrc 配置文件；
5. 添加 plugin；
   1. 处理 css 提取；
   2. 处理 js 压缩；
6. 添加 devServer；

### 基本的配置

1. 添加输入输出
2. 添加 webpack-html 插件；
3. 添加 loader
   1. 添加 babelrc 配置文件；
4. 添加 plugin
   1. 处理 css 提取
   2. 处理 js 压缩
5. 区分 dev 与 prod 模式；
6. 添加 devServer

### 完整的项目结构如下

<!-- !具体参考webpack-5，可以重新走一遍流程 -->

```bash
/Users/qiuwww/code/learn/blog/9.前端工程化/webpack/webpack-5
├── README.md
├── babel.config.js
├── dist
|  ├── ast-68db6b.js
|  ├── ast-68db6b.js.map
|  ├── fileList.md
|  ├── index-68db6b.js
|  ├── index.html
|  ├── login-68db6b.js
|  └── public
├── package.json
├── public
|  ├── config.js
|  ├── favicon.ico
|  ├── index.html
|  ├── js
|  └── login.html
├── scripts
|  ├── loader-modify.js
|  └── plugins
├── server.js
├── src
|  ├── a.js
|  ├── ast.js
|  ├── css
|  ├── handle.js
|  ├── imgs
|  ├── index.js
|  ├── login.js
|  └── logo.webp
├── tree.txt
├── webpack.config.base.js
├── webpack.config.dev.js
├── webpack.config.prod.js
└── yarn.lock

directory: 451 file: 26

ignored: directory (1)
```
