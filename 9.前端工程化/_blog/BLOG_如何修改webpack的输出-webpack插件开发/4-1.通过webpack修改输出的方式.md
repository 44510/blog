## 通过 webpack 修改输出的方式

使用 webpack 来修改要执行的源码，返回处理过后的代码。因为这个过程是很多插件的基本操作，可以方便我们理解插件的运行逻辑与开发流程。本次主要设计到使用 loader 和 plugin 来修改源代码，并返回结果。

Compiler 代表着 webpack 从启动到关闭的整个生命周期，**而 Compilation 只代表来一次编译，而修改源码的时机正好需要在编译的过程中修改**。

1. 使用 webpack 修改输出代码的方式可以有如下：
   1. 使用自定义 loader；
   2. 使用自定义 plugin；
      1. 可以选择在 compilation/emit 等周期内，修改 compilation.assets 的内容；
2. 修改输出结果的方式：
   1. 直接操作字符串，使用 String 和 RegExp 的一系列方法，对字符串的内容进行增删改查，但是这样不是很安全；
   2. 转为 ast，基本思路 code -> ast -> code 的方式；
      1. 这里可以参考文章[使用 AST 抽象语法树处理代码](https://juejin.cn/post/7288229413035130938)；
