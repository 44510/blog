# types介绍

[npm包地址](https://www.npmjs.com/package/@babel/types)
[homepage](https://babel.dev/docs/babel-types)
[types使用](https://juejin.cn/post/6984945589859385358#heading-7)
[参考](https://blog.csdn.net/weixin_40906515/article/details/118004822)

## 常见的 AST 节点

1. Literal，字面量；
   2. 数字字面量 NumericLiteral
   3. 布尔字面量 BooleanLiteral
   4. 字符串字面量 StringLiteral
   5. 正则表达式字面量 RegExpLiteral
2. Identifier，Identifier 是标识符的意思，变量名、属性名、参数名等各种声明和引用的名字，都是Identifier；
3. Statement，statement 是语句，它是可以独立执行的单位，比如 break，continue，debugger，return 或者 if 语句、while 语句、for 语句，还有声明语句，表达式语句等。
4. Declaration，声明语句是一种特殊的语句，它执行的逻辑是在作用域内声明一个变量、函数、class、import、export 等；
5. Expression，expression 是表达式，特点是执行完以后有返回值，这是和语句 (statement) 的区别。
6. Class，class 的语法比较特殊，有专门的 AST 节点来表示。
   1. 整个 class 的内容是 ClassBody，属性是 ClassProperty，方法是ClassMethod。
7. Modules，es module 是语法级别的模块规范，所以也有专门的 AST 节点。
8. Program & Directive，program 是代表整个程序的节点，它有 body 属性代表程序体，存放 statement 数组，就是具体执行的语句的集合。还有 directives 属性，存放Directive 节点，比如"use strict" 这种指令会使用 Directive 节点表示。
9. File & Comment，babel 的 AST 最外层节点是 File，它有 program、comments、tokens 等属性，分别存放 Program 程序体、注释、token 等，是最外层节点。

### 节点类型

类型 说明

- File 文件 (顶层节点包含 Program)
- Program 整个程序节点 (包含 body 属性代表程序体)
- Directive 指令 (例如 "use strict")
- Comment 代码注释
- Statement 语句 (可独立执行的语句)
- Literal 字面量 (基本数据类型、复杂数据类型等值类型)
- Identifier 标识符 (变量名、属性名、函数名、参数名等)
- Declaration 声明 (变量声明、函数声明、Import、Export 声明等)
- Specifier 关键字 (ImportSpecifier、ImportDefaultSpecifier、ImportNamespaceSpecifier、ExportSpecifier)
- Expression 表达式

### ast的类型

1. Identifier：
   1. 是标识符的意思，变量名、属性名、参数名等各种声明和引用的名字，都是Identifer。
2. Statement：
   1. statement 是语句，它是可以独立执行的单位，比如 break，continue，debugger，return 或者 if 语句、while 语句、for 语句，还有声明语句，表达式语句等。我们写的每一条可以独立执行的代码，都是语句。
   2. 语句末尾一般会加一个分号分隔，或者用换行分隔。
   3. 语句是代码执行的最小单位，可以说，代码是由语句（Statement）构成的。
3. Declaration：
   1. 声明语句是一种特殊的语句，它执行的逻辑是在作用域内声明一个变量、函数、class、import、export 等。
   2. 声明语句用于定义变量，变量声明也是代码中一个基础的部分。
4. Expression：
   1. expression 是表达式，**特点是执行完以后有返回值，这是和语句 (statement) 的区别**。
   2. 有的表达式可以单独执行，符合语句的特点，所以也是语句，比如赋值表达式、数组表达式等，但有的表达式不能单独执行，需要和其他类型的节点组合在一起构成语句。比如匿名函数表达式和匿名 class 表达式单独执行会报错。
   3. **表达式语句解析成 AST 的时候会包裹一层 ExpressionStatement 节点**，代表这个表达式是被当成语句执行的。
5. Class：
   1. class 的语法比较特殊，有专门的 AST 节点来表示。
   2. 整个 class 的内容是 ClassBody，属性是 ClassProperty，方法是ClassMethod（通过 kind 属性来区分是 constructor 还是 method）。
6. Modules：
   1. es module 是语法级别的模块规范，所以也有专门的 AST 节点。
7. Program & Directive：
   1. program 是代表整个程序的节点，它有 body 属性代表程序体，存放 statement 数组，就是具体执行的语句的集合。还有 directives 属性，存放Directive 节点，比如"use strict" 这种指令会使用 Directive 节点表示。
   2. Program 是包裹具体执行语句的节点，而 Directive 则是代码中的指令部分。
8. File & Comment：
   1. babel 的 AST 最外层节点是 File，它有 program、comments、tokens 等属性，分别存放 Program 程序体、注释、token 等，是最外层节点。
   2. 注释分为**块注释和行内注释**，对应 CommentBlock 和 CommentLine 节点。

## 作用

1. 生成各种类型；
   1. `t.identifier("c")`；
   2. `t.objectProperty(t.identifier("c"),t.arrayPattern([t.identifier("value")]),)`；
   3. 返回语句`t.isReturnStatement(node, opts)`；
   4. 生成计算语句`t.assignmentExpression(operator, left, right)`；
2. 对各种类型进行校验；
   1. <https://github.com/babel/babel/tree/master/packages/babel-types/src/validators>
      1. isLet；
      2. isVar；
      3. isArrayExpression；
      4. t.react.isCompatTag("div")；
      5. ...


### types的常用方法

类型创建:

```js
log(types.stringLiteral('string'))
log(types.numericLiteral(10e4))
log(types.booleanLiteral(0.5 > Math.random()))
log(types.regExpLiteral('\\.jsx?$', 'g'))

// =>

console.log(gen(node).code)
```
