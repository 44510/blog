## 16.3 关于生命周期的问题
React 官方正式发布了 v16.3 版本。在这次的更新中，除了前段时间被热烈讨论的新 Context API 之外，

新引入的两个生命周期函数 getDerivedStateFromProps，getSnapshotBeforeUpdate 以及

在未来 v17.0 版本中即将被移除的三个生命周期函数 componentWillMount，componentWillReceiveProps，componentWillUpdate .

### 方法替代
要被废弃的方法：

componentWillMount--使用componentDidMount代替

componentWillUpdate--使用componentDidUpdate代替

componentWillReceiveProps--使用一个新的方法：static getDerivedStateFromProps来代替。

### getDerivedStateFromProps
getDerivedStateFromProps内部不可以有副作用，因为现在是无论是state改变还是props改变，

都会执行它。


但是，问题来了。既然这个方法没有办法访问this，那么如何调用this.setState呢？答案就是，不调用。这个方法直接返回需要更新的state的数据，或者返回null，如果没有什么需要更新的话。











static getDerivedStateFromProps(nextProps, prevState) {

  if(nextProps.currentRow === prevState.lastRow) {

    return null;

  }

 

  return {

    lastRow: nextProps.currentRow,

    isCrollingDown: nextProps.curentRow > prevState.lastRow

  }

}

调用这个方法和之前调用this.setState的效果是一样的。只会修改这些返回的值，如果是null的话则不修改state。state的其他值都会保留。
