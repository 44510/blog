---
title: HTTP1与HTTP2.0及HTTPS协议
date: 2017-3-6
tags:
  - 请求协议
  - http1
  - http2.0
  - https
---

## 简述 http 1.1 与 http 1.0 的区别

- http 1.0 对于每个连接都得建立一次连接, **一次只能传送一个请求和响应**, 请求就会关闭, http1.0 没有 Host 字段

- 而 http1.1 在**同一个连接（tcp）中可以传送多个请求和响应**, 多个请求可以重叠和同时进行, http1.1 必须有 host 字段

- http1.1 中引入了 ETag 头, 它的值 entity tag 可以用来唯一的描述一个资源. 请求消息中可以使用 If-None-Match 头域来匹配资源的 entitytag 是否有变化

- http1.1 新增了 Cache-Control 头域(消息请求和响应请求都可以使用), 它支持一个可扩展的指令子集

- http1.0 中只定义了 16 个状态响应码, 对错误或警告的提示不够具体. http1.1 引入了一个 Warning 头域, 增加对错误或警告信息的描述. 且新增了 24 个状态响应码

## HTTP 与 HTTPS 的区别

Http 协议**运行在 TCP** 之上，**明文传输，客户端与服务器端都无法验证对方的身份**；

Https 是身披 SSL(Secure Socket Layer)外壳的 Http，**运行于 SSL 上**，SSL 运行于 TCP 之上，是添加了加密和认证机制的 HTTP。二者之间存在如下不同：

- 端口不同：Http 与 Https 使用不同的连接方式，用的端口也不一样，前者是 80，后者是 443；

- 资源消耗：和 HTTP 通信相比，Https 通信会由于加减密处理消耗更多的 CPU 和内存资源；

- 开销：**Https 通信需要证书**，而证书一般需要向认证机构购买；

- Https 的加密机制是一种**共享密钥加密和公开密钥加密并用的混合加密机制**。

## 如何理解 HTTP 协议是无状态的

HTTP 协议是无状态的，指的是协议对于事务处理没有记忆能力，服务器不知道客户端是什么状态。也就是说，打开一个服务器上的网页和上一次打开这个服务器上的网页之间没有任何联系。HTTP 是一个无状态的面向连接的协议，无状态不代表 HTTP 不能保持 TCP 连接，更不能代表 HTTP 使用的是 UDP 协议（无连接）。

## http2.0

**http2.0 不是 https**，它相当于是 http 的下一代规范（譬如 https 的请求可以是 http2.0 规范的）。

然后简述下 http2.0 与 http1.1 的**显著不同点**：

- http1.1 中，每请求一个资源，**都是需要开启一个 tcp/ip 连接的**，所以对应的结果是，每一个资源对应一个 tcp/ip 请求，由于 tcp/ip 本身**有并发数限制**，所以当资源一多，速度就显著慢下来
- **http2.0 中，一个 tcp/ip 请求可以请求多个资源，也就是说，只要一次 tcp/ip 请求，就可以请求若干个资源，分割成更小的帧请求，速度明显提升**。多个请求合成一个。
- 如果 http2.0 全面应用，**很多 http1.1 中的优化方案就无需用到了**（譬如打包成精灵图，静态资源多域名拆分等）。

**然后简述下 http2.0 的一些特性：**（感觉还需要很久啊）

- **多路复用**（即一个 tcp/ip 连接可以请求多个资源）href||src；
- **首部压缩**（http 头部压缩，减少体积）；
- **二进制分帧**（**在应用层跟传送层之间增加了一个二进制分帧层**，改进传输性能，实现低延迟和高吞吐量）；
- **服务器端推送**（服务端可以**对客户端的一个请求发出多个响应，可以主动通知客户端 websocket 替代**）；
- **请求优先级**（如果流**被赋予了优先级**，**它就会基于这个优先级来处理**，由服务器决定需要多少资源来处理该请求。）

## https

简单来看，https 与 http 的区别就是： **在请求前，会建立 ssl 链接，确保接下来的通信都是加密的，无法被轻易截取分析。**

**如果要将网站升级成 https，需要后端支持（后端需要申请证书等），然后 https 的开销也比 http 要大（因为需要额外建立安全链接以及加密等），**所以一般来说 http2.0 配合 https 的体验更佳（因为 http2.0 更快了）。
