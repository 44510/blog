# 页面加载性能之常见的性能指标<https://juejin.cn/post/6856397971467010061><https://juejin.cn/post/7084481163137384479>

## 指标的分类

1. 感知加载速度: 页面加载完并给用户呈现了展示内容，这里的内容并不一定是要展示全部的内容；
2. 加载响应: 页面加载完到js执行；
3. 运行时响应: 页面加载完之后，到页面可交互，可交互，这个时候已经渲染完成，也不会执行js了；
4. 视觉稳定性: 页面上是否有干扰元素，例如预期之外的滚动或者移动；
5. 流畅性: transition和animation是否流畅，帧率是否保持在60。

## 常见的性能指标

1. 首屏绘制（First Paint，FP）：是指浏览器从响应用户输入网址地址，到浏览器开始显示内容的时间，**简而言之就是浏览器第一次发生变化的时间**。
   1. 也叫白屏时间；
   2. FP指渲染出第一个像素点；
   3. 从开始加在到有内容展示的时间；
2. First contentful paint (FCP): **从页面开始加载**，到页面**任意内容渲染在屏幕上的时间**。(实验属性，现场数据)；
   1. 是指浏览器从响应用户输入网络地址，在页面首次绘制文本，图片（包括背景图）、非白色的 canvas 或者SVG 才算做 FCP；
   2. Onload Event；
   3. 相对于FP，更进一步，有文本和图片绘制；
   4. 这个时候可以设置一些骨架屏，让用户可以很快的感受到页面的变化；
   5. `window.performance.getEntriesByName('first-contentful-paint');`；
3. Largest contentful paint (LCP): **从页面加载开始**，**到页面上最大的文本块或者图片元素渲染在屏幕上的时间**。(实验数据，现场数据)；
   1. LCP（全称“Largest Contentful Paint”）表示可视区“内容”**最大的可见元素开始出现在屏幕上的时间点**。
   2. **主要内容的加载时间**；
   3. 这里的 Content 包括文本、图片、SVG 元素以及非全白的 Canvas 对象；
   4. 可以认为是**页面全部加载完成**；
   5. FMP（全称“First Meaningful Paint”，翻译为“**首次有效绘制”表示页面的“主要内容”开始出现在屏幕上的时间点**，它以前是我们测量用户加载体验的主要指标。**本质上是通过一个算法来猜测某个时间点可能是 FMP**，但是最好的情况也只有77%的准确率，在lighthouse6.0 的时候废弃掉了这个指标，**取而代之的是 LCP 这个指标**。
4. First input delay (FID): 用户第一个交互行为，比如点击链接、点击按钮等，到浏览器实际响应这次交互的时间。(现场数据)；
5. Time to Interactive (TTI): 从页面开始加载，到内容呈现，**初始js加载完成，再到可以立刻响应用户交互的时间**。(实验数据)；
   1. **可交互时间**（Time to Interactive，TTI）；
6. Total blocking time (TBT): 在FCP和TTI之间的时间，即页面可见到可交互的时间，代表了主线程被阻塞无法响应用户交互。（实验数据）
7. Cumulative layout shift (CLS): 从页面开始加载，到页面生命周期变为隐藏之间的所有意外的布局变化的累计分数。(实验数据，现场数据)

### 其他的说法

1. 白屏时间
   1. 白屏时间 = 地址栏输入网址后回车 - 浏览器出现第一个元素；
   2. 白屏结束时间 = **FP事件触发时间**
2. 首屏时间
   1. Onload Event；
   2. 首屏时间 = 地址栏输入网址后回车 - 浏览器第一屏渲染完成；
   3. 首屏结束时间 = **FCP事件触发时间**
      1. 当然FCP代表第一个内容被渲染出来，有些业务中希望用更关键的内容的渲染来表示首屏，这时候可以用FMP或者LCP来作为首屏的计算指标。

## 区别

1. FCP和LCP的区别；
   1. 只是一个称谓，lcp更靠后，认为是页面主要内容都展示了才算，fcp是第一次渲染完成图片这些内容的时间；
   2. 您可能会有一个常见的问题，那就是Largest Contentful Paint与First Contentful Paint之间的区别，这是另一个常见性能指标。
      1. 虽然这两个术语相似，但关键区别在于，**Largest Contentful Paint度量加载页面的“主要内容”所需的时间，而First Contentful Paint则度量加载“首个对象”所需时间（无论它是否是主要内容）**。
      2. 基本上：
         1. LCP=仅主要内容
         2. FCP=第一部分内容，无论内容是什么
         3. 因此，**LCP时间几乎总是略高于FCP时间，因为“主要内容”元素通常不是第一个加载的**。
