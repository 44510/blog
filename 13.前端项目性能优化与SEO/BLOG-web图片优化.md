---
title: web图片优化
date: 2016-3-6
tags:
  - web图片优化
  - 图片格式
categories:
  - [前端页面性能优化, web图片优化]
---

## 矢量图与位图

### 矢量图

矢量格式适用于**简单形状图形**，并且变换颜色方便，仅通过 CSS 中的 fill 属性便可以改变颜色。并且在多大的缩放下都能保证清晰，矢量格式不能满足复杂的图像，例如照片，高清图。

### 位图

这时候我们就需要位图，位图的格式有很多：

- GIF
- PNG
- JPEG
- JPEG-XR
- WebP
- Bpg

### 优化策略

常见的优化方案：

1. 使用 Data URI 即（base64）编码代替图片：适用于图片大**小于 2 KB**，页面上引用图片总数不多的情况，原理是将图片转换为 base64 编码字符串 inline 到页面或 CSS 中，**可以减少 HTTP 请求**。
2. 合并雪碧图（sprite）：移动端多图情况下，可以将**多图合并到一个图中**，通过 CSS 定位背景图的形式来引用图片，可以**有效减少 HTTP 请求**。
3. 使用 CSS、svg、canvas 或者 iconfont 代替图片：适用于移动端或高级的浏览器，而且绘制的图片比较简单。
4. **懒加载图片**（lazyload）
5. 使用 **cdn** 提供访问图片的入口。

### png、jpg、gif 这些图片格式解释一下，分别什么时候用。有没有了解过 webp

- png 是**便携式网络图片**（Portable Network Graphics）是一种**无损数据压缩位图文件格式**。优点是：**压缩比高，色彩好**。大多数地方都可以用。

- jpg 是一种**针对相片**使用的一种**失真压缩方法**，是一种**破坏性的压缩**，在色调及颜色平滑变化做的不错。在 www 上，被用来**储存和传输照片的格式**。

- gif 是一种**位图文件格式**，以 8 位色重现真色彩的图像。可以实现**动画效果**.

- webp 格式是谷歌在 2010 年推出的图片格式，**压缩率只有 jpg 的 2/3，大小比 png 小了 45%**。缺点是压缩的时间更久了，兼容性不好，目前谷歌和 opera 支持。

### GIF

GIF 意为`Graphics Interchange format`（图形交换格式），GIF 图片的扩展名是 gif。现在**所有的图形浏览器都支持 GIF 格式**，而且有的图形浏览器只熟悉 GIF 格式。GIF 是一种索引颜色格式，在颜色数很少的情况下，产生的文件极小，它的优点主要有：

1. GIF 格式支持背景透明。
2. GIF 格式支持动画。
3. GIF 格式支持图形渐进。
4. GIF 格式支持无损压缩。
5. 水平扫描。

缺点：GIF 这种索引颜色格式最大的缺点就是**它只有 256 种颜色**，这对于照片质量的图片是显然不够的。

### JPEG/JPG

JPEG 代表`Joint Photograhic Experts Group`（联合图像专家组），这种格式经常写成 JPG，JPG 图片的扩展名为 jpg。

#### JPEG/JPG 优点

JPG 最主要的**优点**是能支持上百万种颜色，从而可以用来表现照片。此外，由于 JPG 图片使用更有效的有损压缩算法，从而使文件长度更小，下载时间更短。

有损压缩会放弃图像中的某些细节，以减少文件长度。它的压缩比相当高，使用专门的 JPG 压缩工具其压缩比可达 180：1，而且图像质量从浏览角度来讲质量受损不会太大，这样就大大方便了网络传输和磁盘交换文件。

JPG 较 GIF 更适合于照片，因为在照片中损失一些细节不像对艺术线条那么明显。另外，JPG 对照片的压缩比例更大，而最后的质量也更好。

#### JPEG/JPG 缺点

但是从长远来看，JPG 随着带宽的不断提高和存储介质的发展，它也应该是一种被淘汰的图片格式，因为**有损压缩对图像会产生不可恢复的损失**。
所以经过压缩的 JPG 的图片一般不适合打印，在备份重要图片时也最好不要使用 JPG。还有，JPG 也不如 GIF 图像那么灵活，它不支持图形渐进、背景透明，更不支持动画。

## png/jpg/webp 图片格式区别

## 有损压缩和无损压缩

## [Web 上的图片技巧](https://mp.weixin.qq.com/s/1BKevavo_2bQiu6Sas61KQ) ｜ 优化图片使用性能

1. 在页面加载时，它们会在页面的图片加载过程中出现一些布局移动（reflow）。**为了避免这种情况，我们可以为它设置宽度和高度属性**。
2. 一张图片可以用 CSS 隐藏起来。但是，它仍然会被加载到页面中。
3. HTML 图片应该通过**将 alt 属性设置为有意义的描述来访问**。这对屏幕阅读器用户来说是非常有帮助的。
4. 根据页面宽度加载不同的图片，可以使用 [HTML Picture](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/picture) 元素来替换使用 srcset。
5. 背景图：当使用 CSS 背景来显示图片时，需要一个有内容或特定宽度或高度的元素。通常情况下，**背景图片的主要用途应该是用于装饰**。可以设置多背景图。
