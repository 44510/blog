<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>浏览器端创建可下载文件</title>
  </head>
  <body>
    <div class="download">
      测测试下载的文字测试下载的文字测试下载的文字下载的文字测试下载的<b>文字测试下</b>载的文字测试下载的文字载的文字测试下载的文字试下载的文字
    </div>
    <script type="text/javascript">
      // 描述下代码内容：
      // 创建 a 标签
      // 使用 Blob 构造函数将文件内容编译为指定格式的二进制
      // 设置 download 属性设置文件名称
      // Blob 对象作为 Url 也赋给 a 标签，
      // 触发标签click
      // 回收内存
      function loadFile(fileName, content) {
        // 这里的filename可以自己制定文件格式，如果没有指定就是txt格式
        // content必须是文本内容
        var aLink = document.createElement("a");
        var blob = new Blob([content], {
          type: "text/plain"
        });
        var evt = new Event("click");
        aLink.download = fileName;
        aLink.href = URL.createObjectURL(blob);
        aLink.click();
        URL.revokeObjectURL(blob);
      }
      loadFile("test.doc", document.querySelector(".download").innerHTML);

      /**
       * Blob
       */

      // Blob 对象是一个字节序列。拥有 size 和 type 等属性。初始化 Blob 接受的内容类型。

      // ArrayBuffer [TypedArrays] elements.
      // ArrayBufferView [TypedArrays] elements.
      // Blob elements.
      // DOMString [WebIDL] elements.
    </script>
  </body>
</html>
