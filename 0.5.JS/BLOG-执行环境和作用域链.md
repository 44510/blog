---
title: 执行环境和作用域链(scope chain)
date: 2019-06-06
tag:
  - js
  - 概念
---

## 执行环境

执行环境（execution context），执行环境定义了**变量或者函数**有权访问的其他数据，决定了他们各自的行为。每个执行环境都有一个与之关联的**变量对象**，所有定义的函数和变量都在这里。

全局变量是一个**最外围的执行环境**。在 web 中这个执行环境就是 window。

### 执行环境分类

- 全局执行环境(全局作用域)
- 函数局部执行环境(局部作用域)

**每个函数都有自己的执行环境**，当执行流进入一个函数的时候，函数的**执行环境**就会被推入到一个环境栈中。而在函数执行的时候，栈将环境弹出，把控制权交给之前的执行环境，es 的程序执行流正是这个机制控制的。

## 作用域链

代码在一个环境中执行的过程中，会创建变量对象的作用域链(scope chain)，作用域链的作用是保证对**执行环境**有权访问的所有变量和函数的有序访问。

能够访问的执行环境就是函数或者变量的作用域。

**作用域链**的作用是：是**保证对执行环境有权访问的所有变量和函数的有序访问**。

## JS 作用域

**作用域是创建的时候决定的，作用域链是在执行的时候关联起来的。**

JS 有如下的**作用域类型**：

- 全局作用域 window 或者 global；
- 函数作用域（**常用闭包来构造块作用域**）；（**当代码在一个环境中执行时**，会创建**变量对象的一个作用域链**（scope chain）。），**函数作用域在函数创建的时候创建**，全局作用域就是在创建全局对象的时候创建。
- let 声明的**块作用域**（ES6）。可以使用**自执行语句**来模拟块级作用域。
